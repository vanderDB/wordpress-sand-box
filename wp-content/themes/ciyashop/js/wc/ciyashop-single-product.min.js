jQuery(function(n){function i(t,i){this.$target=t,this.$images=n(".ciyashop-product-gallery__image",t),this.$images_threesixty=n(".product-threesixty-zoom-img",t),0!==this.$images.length?(t.data("product_gallery",this),n(window).width()<768?this.zoom_enabled=!1:this.zoom_enabled=!0,this.photoswipe_enabled=!0,i&&(this.zoom_enabled=!1!==i.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==i.photoswipe_enabled&&this.photoswipe_enabled),this.zoomInit=this.zoomInit.bind(this),this.initPhotoswipe=this.initPhotoswipe.bind(this),this.getGalleryItems=this.getGalleryItems.bind(this),this.openPhotoswipe=this.openPhotoswipe.bind(this),this.onResetSlidePosition=this.onResetSlidePosition.bind(this),this.zoom_enabled&&(this.zoomInit(),t.on("cs_woocommerce_gallery_init_zoom",this.zoomInit)),this.photoswipe_enabled&&(this.initPhotoswipe(),t.on("cs_woocommerce_gallery_reset_slide_position",this.onResetSlidePosition))):this.$target.css("opacity",1)}var h={shareEl:!1,closeOnScroll:!1,history:!1,hideAnimationDuration:0,showAnimationDuration:0};i.prototype.zoomInit=function(){if(!this.zoom_enabled)return!1;var e=this.$target.width(),o=!1,t=n(".ciyashop-product-gallery__image");n(t).each(function(t,i){if(n(i).find("img").data("large_image_width")>e)return!(o=!0)}),o&&(n(".ciyashop-product-gallery__image").trigger("zoom.destroy"),n(".ciyashop-product-gallery__image").zoom())},i.prototype.initPhotoswipe=function(){0<this.$images.length&&this.$target.on("click",".ciyashop-product-gallery_button-link-zoom",this.openPhotoswipe),0<this.$images_threesixty.length&&this.$target.on("click",".ciyashop-product-threesixty_button-link-zoom",this.openPhotoswipe),this.$target.on("click",".ciyashop-product-gallery__image a",this.openPhotoswipe)},i.prototype.onResetSlidePosition=function(){n(".ciyashop-product-gallery__wrapper").hasClass("slick-initialized")&&n(".ciyashop-product-gallery__wrapper").slick("slickGoTo",0)},i.prototype.getGalleryItems=function(){var t=this.$images,s=[];return 0<t.length&&t.each(function(t,i){var e=n(i).find("img"),o={src:e.attr("data-large_image"),w:e.attr("data-large_image_width"),h:e.attr("data-large_image_height"),title:e.attr("data-caption")?e.attr("data-caption"):e.attr("title")};s.push(o)}),s},i.prototype.openPhotoswipe=function(t){t.preventDefault();var i=n(".pswp")[0],e=this.getGalleryItems(),o=(n(t.target).is(".ciyashop-product-gallery_button-link-zoom"),this.$target.find(".slick-current")),s=n.extend({index:n(o).index()},h),a=new PhotoSwipe(i,PhotoSwipeUI_Default,e,s);a.init();a.getCurrentIndex();a.listen("afterChange",function(){var t=a.getCurrentIndex();n(".ciyashop-product-gallery__wrapper").hasClass("slick-initialized")&&n(".ciyashop-product-gallery__wrapper").slick("slickGoTo",t)})},n.fn.ciyashop_product_gallery=function(t){return new i(this,t),this},n(".ciyashop-product-gallery").each(function(){n(this).ciyashop_product_gallery()})});